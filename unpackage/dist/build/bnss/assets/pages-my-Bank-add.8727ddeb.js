import{x as e,n as a,o as t,e as l,w as s,i as n,f as o,k as r,j as i,t as d,q as c,I as u,r as m}from"./index-ec5cfb06.js";import{_ as f,a as p}from"./uni-forms.b8ce2cda.js";import{r as b}from"./uni-app.es.e9a932bd.js";import{v as h,t as g,w as k,x as y}from"./server.c89461b6.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";const _=x({data:()=>({bankData:{},type:"",urltext:"",isEmailCode:0,rules:{payeeName:{rules:[{required:!0,errorMessage:"Please enter your payee name"}]},bankName:{rules:[{required:!0,errorMessage:"Please Enter Bank Name"}]},cardNumber:{rules:[{required:!0,errorMessage:"Please enter your bank card"}]},ifsc:{rules:[{required:!0,errorMessage:"Please enter ifsc"}]},cardNumberan:{rules:[{required:!0,errorMessage:"Please confirm your bank card"}]},ifscan:{rules:[{required:!0,errorMessage:"Please confirm your bank ifsc"}]},phoneCode:{rules:[{required:!0,errorMessage:"Your phone verification code"}]}}}),onLoad(e){e&&"add"===e.type&&(this.type=e.type,this.bankData={}),e&&"edit"===e.type&&(this.type=e.type,this.getBankeList()),e&&e.url&&(this.urltext=e.url)},methods:{SendEmailCode(){const a=null;clearInterval(a),h().then((t=>{e({icon:"success",duration:3e3,title:t.msg}),this.isEmailCode=60,a=setInterval((()=>{this.isEmailCode>0?this.isEmailCode--:(this.isEmailCode=0,clearInterval(a))}),1e3)}))},getBankeList(){g().then((e=>{this.bankData=e.data[0],this.bankData.cardNumberan=e.data[0].cardNumber,this.bankData.ifscan=e.data[0].ifsc}))},addBanke(){"add"===this.type&&this.$refs.form.validate().then((t=>(console.log(t),t.cardNumber!==t.cardNumberan?(e({icon:"fail",duration:3e3,title:"The card numbers entered twice are inconsistent！"}),!1):t.ifsc!==t.ifscan?(e({icon:"fail",duration:3e3,title:"The card ifsc entered twice are inconsistent！"}),!1):void k({cardNumber:t.cardNumber,ifsc:t.ifsc,payeeName:t.payeeName,phoneCode:t.phoneCode}).then((t=>{e({icon:"success",duration:3e3,title:`${t.msg}`}),setTimeout((()=>{"tixian"===this.urltext?a({url:"/pages/my/withdraw/index"}):a({url:"/pages/my/Bank/index"})}),3e3)}))))).catch((e=>{console.log("表单错误信息：",e)})),"edit"===this.type&&this.$refs.form.validate().then((t=>(console.log(t),t.cardNumber!==t.cardNumberan?(e({icon:"fail",duration:3e3,title:"The card numbers entered twice are inconsistent！"}),!1):t.ifsc!==t.ifscan?(e({icon:"fail",duration:3e3,title:"The card ifsc entered twice are inconsistent！"}),!1):void y({cardNumber:t.cardNumber,ifsc:t.ifsc,payeeName:t.payeeName,id:this.bankData.id,phoneCode:t.phoneCode}).then((t=>{e({icon:"success",duration:3e3,title:`${t.msg}`}),setTimeout((()=>{"tixian"===this.urltext?a({url:"/pages/my/withdraw/index"}):a({url:"/pages/my/Bank/index"})}),3e3)}))))).catch((e=>{console.log("表单错误信息：",e)}))}}},[["render",function(e,a,h,g,k,y){const x=n,_=c,N=u,w=b(m("uni-forms-item"),f),C=b(m("uni-forms"),p);return t(),l(x,{class:"p-3 color-2"},{default:s((()=>[o(x,{style:{height:"var(--status-bar-height)",width:"100%"}}),o(x,{class:"usersLogin"},{default:s((()=>[o(x,{class:"background-white border-radius-2 p-3"},{default:s((()=>[o(C,{ref:"form",modelValue:k.bankData,rules:k.rules},{default:s((()=>[o(w,{label:"",name:"payeeName"},{default:s((()=>[o(x,{class:"phonecode flex align-center border-1 p-1 font-md"},{default:s((()=>[o(_,{class:"pl-1"}),r("i",{class:"iconfont font-lg font-weight-bolder color-test"},""),o(N,{modelValue:k.bankData.payeeName,"onUpdate:modelValue":a[0]||(a[0]=e=>k.bankData.payeeName=e),class:"p-1 bl-1 ml-2 pl-2 width-100",type:"text",placeholder:"Bank holder name"},null,8,["modelValue"])])),_:1})])),_:1}),o(w,{label:"",name:"cardNumber"},{default:s((()=>[o(x,{class:"phonecode flex align-center border-1 p-1 font-md"},{default:s((()=>[o(_,{class:"pl-1"}),r("i",{class:"iconfont font-lg font-weight-bolder color-test"},""),o(N,{modelValue:k.bankData.cardNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>k.bankData.cardNumber=e),class:"p-1 bl-1 ml-2 pl-2 width-100",type:"text",placeholder:"Enter your account number"},null,8,["modelValue"])])),_:1})])),_:1}),o(w,{label:"",name:"ifsc"},{default:s((()=>[o(x,{class:"flex align-center border-1 p-1 font-md"},{default:s((()=>[o(_,{class:"pl-1"}),r("i",{class:"iconfont font-lg font-weight-bolder color-test"},""),o(N,{modelValue:k.bankData.ifsc,"onUpdate:modelValue":a[2]||(a[2]=e=>k.bankData.ifsc=e),class:"p-1 bl-1 ml-2 pl-2 width-100",type:"text",placeholder:"Enter IFSC"},null,8,["modelValue"])])),_:1})])),_:1}),o(x,{class:"font-small flex justify-between"},{default:s((()=>[o(_,{class:"color-1 font"},{default:s((()=>[i("Please confirm the bank card information again")])),_:1})])),_:1}),o(w,{label:"",name:"cardNumberan"},{default:s((()=>[o(x,{class:"phonecode flex align-center border-1 p-1 font-md mt-3"},{default:s((()=>[o(_,{class:"pl-1"}),r("i",{class:"iconfont font-lg font-weight-bolder color-test"},""),o(N,{modelValue:k.bankData.cardNumberan,"onUpdate:modelValue":a[3]||(a[3]=e=>k.bankData.cardNumberan=e),class:"p-1 bl-1 ml-2 pl-2 width-100",type:"text",placeholder:"Enter your account number"},null,8,["modelValue"])])),_:1})])),_:1}),o(w,{label:"",name:"ifscan"},{default:s((()=>[o(x,{class:"flex align-center border-1 p-1 font-md"},{default:s((()=>[o(_,{class:"pl-1"}),r("i",{class:"iconfont font-lg font-weight-bolder color-test"},""),o(N,{modelValue:k.bankData.ifscan,"onUpdate:modelValue":a[4]||(a[4]=e=>k.bankData.ifscan=e),class:"p-1 bl-1 ml-2 pl-2 width-100",type:"text",placeholder:"Enter IFSC"},null,8,["modelValue"])])),_:1})])),_:1}),o(w,{label:"",name:"phoneCode"},{default:s((()=>[o(x,{class:"flex align-center border-1 p-1 font-md"},{default:s((()=>[o(_,{class:"pl-1"}),r("i",{class:"iconfont font-lg font-weight-bolder color-test"},""),o(N,{modelValue:k.bankData.phoneCode,"onUpdate:modelValue":a[5]||(a[5]=e=>k.bankData.phoneCode=e),class:"p-1 bl-1 ml-2 pl-2 width-100",type:"text",placeholder:"Your phone verification code"},null,8,["modelValue"])])),_:1})])),_:1}),o(x,{class:"font-small flex justify-between mt-2"},{default:s((()=>[o(_,null,{default:s((()=>[i("Click send verification code ")])),_:1}),0===k.isEmailCode?(t(),l(_,{key:0,class:"color-1",onClick:y.SendEmailCode},{default:s((()=>[i("Send Verification")])),_:1},8,["onClick"])):(t(),l(_,{key:1},{default:s((()=>[i("After "+d(k.isEmailCode)+" seconds Resend",1)])),_:1}))])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})])),_:1}),o(x,{class:"btn-login font-lg mt-6 p-3 border-radius-2 balens",onClick:y.addBanke},{default:s((()=>[i(d("add"==k.type?"Add Save":"Edit Save"),1)])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-70fb2b24"]]);export{_ as default};
